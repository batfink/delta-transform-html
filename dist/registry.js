"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.add = add;
exports.listFormats = listFormats;
exports.get = get;
exports.checkPriorities = checkPriorities;
var registry = {};
var formatList = [];

function sortRegistry() {
  formatList = Object.keys(registry).sort(function (a, b) {
    return registry[b].priority - registry[a].priority;
  }).map(function (n) {
    return registry[n];
  });
}

function add(name, format) {
  registry[name] = format;
  sortRegistry();
}

function listFormats() {
  return formatList;
}

function get(name) {
  return registry[name];
}

function checkPriorities() {
  var seen = {};
  Object.keys(registry).forEach(function (key) {
    if (seen[registry[key].priority]) {
      console.log("ERROR: conflict between " + key + " and " + seen[registry[key].priority]);
    }
    seen[registry[key].priority] = key;
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdHJ5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O1FBU2dCO1FBS0E7UUFJQTtRQUlBO0FBdEJoQixJQUFNLFdBQVcsRUFBWDtBQUNOLElBQUksYUFBYSxFQUFiOztBQUVKLFNBQVMsWUFBVCxHQUF3QjtBQUN0QixlQUFhLE9BQU8sSUFBUCxDQUFZLFFBQVosRUFDWixJQURZLENBQ1AsVUFBQyxDQUFELEVBQUksQ0FBSjtXQUFVLFNBQVMsQ0FBVCxFQUFZLFFBQVosR0FBdUIsU0FBUyxDQUFULEVBQVksUUFBWjtHQUFqQyxDQURPLENBRVosR0FGWSxDQUVSLFVBQUMsQ0FBRDtXQUFPLFNBQVMsQ0FBVDtHQUFQLENBRkwsQ0FEc0I7Q0FBeEI7O0FBTU8sU0FBUyxHQUFULENBQWEsSUFBYixFQUFtQixNQUFuQixFQUEyQjtBQUNoQyxXQUFTLElBQVQsSUFBaUIsTUFBakIsQ0FEZ0M7QUFFaEMsaUJBRmdDO0NBQTNCOztBQUtBLFNBQVMsV0FBVCxHQUF1QjtBQUM1QixTQUFPLFVBQVAsQ0FENEI7Q0FBdkI7O0FBSUEsU0FBUyxHQUFULENBQWEsSUFBYixFQUFtQjtBQUN4QixTQUFPLFNBQVMsSUFBVCxDQUFQLENBRHdCO0NBQW5COztBQUlBLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFNLE9BQU8sRUFBUCxDQUQwQjtBQUVoQyxTQUFPLElBQVAsQ0FBWSxRQUFaLEVBQ0MsT0FERCxDQUNTLFVBQUMsR0FBRCxFQUFTO0FBQ2hCLFFBQUksS0FBSyxTQUFTLEdBQVQsRUFBYyxRQUFkLENBQVQsRUFBa0M7QUFDaEMsY0FBUSxHQUFSLDhCQUF1QyxnQkFBVyxLQUFLLFNBQVMsR0FBVCxFQUFjLFFBQWQsQ0FBdkQsRUFEZ0M7S0FBbEM7QUFHQSxTQUFLLFNBQVMsR0FBVCxFQUFjLFFBQWQsQ0FBTCxHQUErQixHQUEvQixDQUpnQjtHQUFULENBRFQsQ0FGZ0M7Q0FBM0IiLCJmaWxlIjoicmVnaXN0cnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZWdpc3RyeSA9IHt9O1xubGV0IGZvcm1hdExpc3QgPSBbXTtcblxuZnVuY3Rpb24gc29ydFJlZ2lzdHJ5KCkge1xuICBmb3JtYXRMaXN0ID0gT2JqZWN0LmtleXMocmVnaXN0cnkpXG4gIC5zb3J0KChhLCBiKSA9PiByZWdpc3RyeVtiXS5wcmlvcml0eSAtIHJlZ2lzdHJ5W2FdLnByaW9yaXR5KVxuICAubWFwKChuKSA9PiByZWdpc3RyeVtuXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQobmFtZSwgZm9ybWF0KSB7XG4gIHJlZ2lzdHJ5W25hbWVdID0gZm9ybWF0O1xuICBzb3J0UmVnaXN0cnkoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RGb3JtYXRzKCkge1xuICByZXR1cm4gZm9ybWF0TGlzdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldChuYW1lKSB7XG4gIHJldHVybiByZWdpc3RyeVtuYW1lXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUHJpb3JpdGllcygpIHtcbiAgY29uc3Qgc2VlbiA9IHt9O1xuICBPYmplY3Qua2V5cyhyZWdpc3RyeSlcbiAgLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChzZWVuW3JlZ2lzdHJ5W2tleV0ucHJpb3JpdHldKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRVJST1I6IGNvbmZsaWN0IGJldHdlZW4gJHtrZXl9IGFuZCAke3NlZW5bcmVnaXN0cnlba2V5XS5wcmlvcml0eV19YCk7XG4gICAgfVxuICAgIHNlZW5bcmVnaXN0cnlba2V5XS5wcmlvcml0eV0gPSBrZXk7XG4gIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
