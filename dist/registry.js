"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.add = add;
exports.listFormats = listFormats;
exports.get = get;
exports.checkPriorities = checkPriorities;
var registry = {};
var formatList = [];

function sortRegistry() {
  formatList = Object.keys(registry).sort(function (a, b) {
    return registry[b].priority - registry[a].priority;
  }).map(function (n) {
    return registry[n];
  });
}

function add(name, format) {
  registry[name] = format;
  sortRegistry();
}

function listFormats() {
  return formatList;
}

function get(name) {
  return registry[name];
}

function checkPriorities() {
  var seen = {};
  Object.keys(registry).forEach(function (key) {
    if (seen[registry[key].priority]) {
      console.log("ERROR: conflict between " + key + " and " + seen[registry[key].priority]);
    }
    seen[registry[key].priority] = key;
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdHJ5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O1FBU2dCLEcsR0FBQSxHO1FBS0EsVyxHQUFBLFc7UUFJQSxHLEdBQUEsRztRQUlBLGUsR0FBQSxlO0FBdEJoQixJQUFNLFdBQVcsRUFBakI7QUFDQSxJQUFJLGFBQWEsRUFBakI7O0FBRUEsU0FBUyxZQUFULEdBQXdCO0FBQ3RCLGVBQWEsT0FBTyxJQUFQLENBQVksUUFBWixFQUNaLElBRFksQ0FDUCxVQUFDLENBQUQsRUFBSSxDQUFKO0FBQUEsV0FBVSxTQUFTLENBQVQsRUFBWSxRQUFaLEdBQXVCLFNBQVMsQ0FBVCxFQUFZLFFBQTdDO0FBQUEsR0FETyxFQUVaLEdBRlksQ0FFUixVQUFDLENBQUQ7QUFBQSxXQUFPLFNBQVMsQ0FBVCxDQUFQO0FBQUEsR0FGUSxDQUFiO0FBR0Q7O0FBRU0sU0FBUyxHQUFULENBQWEsSUFBYixFQUFtQixNQUFuQixFQUEyQjtBQUNoQyxXQUFTLElBQVQsSUFBaUIsTUFBakI7QUFDQTtBQUNEOztBQUVNLFNBQVMsV0FBVCxHQUF1QjtBQUM1QixTQUFPLFVBQVA7QUFDRDs7QUFFTSxTQUFTLEdBQVQsQ0FBYSxJQUFiLEVBQW1CO0FBQ3hCLFNBQU8sU0FBUyxJQUFULENBQVA7QUFDRDs7QUFFTSxTQUFTLGVBQVQsR0FBMkI7QUFDaEMsTUFBTSxPQUFPLEVBQWI7QUFDQSxTQUFPLElBQVAsQ0FBWSxRQUFaLEVBQ0MsT0FERCxDQUNTLFVBQUMsR0FBRCxFQUFTO0FBQ2hCLFFBQUksS0FBSyxTQUFTLEdBQVQsRUFBYyxRQUFuQixDQUFKLEVBQWtDO0FBQ2hDLGNBQVEsR0FBUiw4QkFBdUMsR0FBdkMsYUFBa0QsS0FBSyxTQUFTLEdBQVQsRUFBYyxRQUFuQixDQUFsRDtBQUNEO0FBQ0QsU0FBSyxTQUFTLEdBQVQsRUFBYyxRQUFuQixJQUErQixHQUEvQjtBQUNELEdBTkQ7QUFPRCIsImZpbGUiOiJyZWdpc3RyeS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlZ2lzdHJ5ID0ge307XG5sZXQgZm9ybWF0TGlzdCA9IFtdO1xuXG5mdW5jdGlvbiBzb3J0UmVnaXN0cnkoKSB7XG4gIGZvcm1hdExpc3QgPSBPYmplY3Qua2V5cyhyZWdpc3RyeSlcbiAgLnNvcnQoKGEsIGIpID0+IHJlZ2lzdHJ5W2JdLnByaW9yaXR5IC0gcmVnaXN0cnlbYV0ucHJpb3JpdHkpXG4gIC5tYXAoKG4pID0+IHJlZ2lzdHJ5W25dKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChuYW1lLCBmb3JtYXQpIHtcbiAgcmVnaXN0cnlbbmFtZV0gPSBmb3JtYXQ7XG4gIHNvcnRSZWdpc3RyeSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGlzdEZvcm1hdHMoKSB7XG4gIHJldHVybiBmb3JtYXRMaXN0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0KG5hbWUpIHtcbiAgcmV0dXJuIHJlZ2lzdHJ5W25hbWVdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tQcmlvcml0aWVzKCkge1xuICBjb25zdCBzZWVuID0ge307XG4gIE9iamVjdC5rZXlzKHJlZ2lzdHJ5KVxuICAuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKHNlZW5bcmVnaXN0cnlba2V5XS5wcmlvcml0eV0pIHtcbiAgICAgIGNvbnNvbGUubG9nKGBFUlJPUjogY29uZmxpY3QgYmV0d2VlbiAke2tleX0gYW5kICR7c2VlbltyZWdpc3RyeVtrZXldLnByaW9yaXR5XX1gKTtcbiAgICB9XG4gICAgc2VlbltyZWdpc3RyeVtrZXldLnByaW9yaXR5XSA9IGtleTtcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
